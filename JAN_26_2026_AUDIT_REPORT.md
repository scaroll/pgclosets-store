# PG CLOSETS - JAN 26 2026 COMPREHENSIVE AUDIT REPORT

**Date:** January 26, 2026
**Previous Audit:** Jan 24, 2026
**Overall Status:** ‚ö†Ô∏è **AT RISK** (Security Vulnerabilities, Linting Failures)

---

## üö® EXECUTIVE SUMMARY

A comprehensive audit of the project has been conducted. While the testing suite is largely passing, the project faces significant challenges in **dependency security** and **code quality enforcement**.

- **Security:** üî¥ **CRITICAL** - 20 known vulnerabilities (19 pre-fix), mostly in 3rd party SDKs.
- **Linting:** üî¥ **FAILING** - Significant number of unescaped entities and other lint errors.
- **Testing:** üü° **PASSING WITH WARNINGS** - Tests pass, but console warnings indicate accessibility and prop issues.

---

## 1. üõ°Ô∏è SECURITY AUDIT

**Status:** üî¥ **CRITICAL**
**Vulnerabilities:** 20 Total (10 High, 4 Moderate, 6 Low)

The `npm audit fix` attempt did not resolve the core issues, which stem from deep dependencies in SDKs:

- **Critical Offenders:**
  - **`quickbooks-sdk`**: Brings in vulnerable `axios` (SSRF/CSRF) and `follow-redirects`. This is a high-risk vector if the SDK is used for user-controlled inputs.
  - **`zendesk-client`**: Brings in vulnerable `node-fetch` (header leakage).
  - **Vercel Utilities**: `path-to-regexp` ReDoS vulnerability.

**Recommendation:**

- **Inspect Usage**: Verify if `quickbooks-sdk` and `zendesk-client` are strictly necessary or can be upgraded/replaced.
- **Manual Overrides**: Consider using `overrides` in `package.json` to force newer versions of `axios` if compatible.

---

## 2. üßπ CODE QUALITY & LINTING

**Status:** üî¥ **FAILING**

The automated linting process fails, preventing deployment checks from passing cleanly.

- **Major Issues:**
  - **Unescaped Entities:** Widespread `react/no-unescaped-entities` errors (e.g., usage of `'` instead of `&apos;` in text).
  - **Deprecated Rules:** Usage of `@typescript-eslint/no-var-requires`.

**Recommendation:**

- **Global Fix:** Run a targeted search-and-replace or `eslint --fix` specifically for entities.
- **Strictness:** The current `max-warnings 0` setting is excellent standard but currently blocking.

---

## 3. üß™ TESTING & QA AUDIT

**Status:** üü° **PASSING WITH WARNINGS**

The test suite (`vitest`) passes, which is a strong positive signal. However, the output is noisy with React warnings.

- **Observations:**
  - **Accessibility Warnings:** `Missing Description or aria-describedby for {DialogContent}`.
  - **DOM Warnings:** `Received true for a non-boolean attribute fill` (likely Next.js `Image` or SVG handling).
  - **Coverage:** Tests seem to cover critical paths (Cart, Forms, Products).

**Recommendation:**

- **Fix Dialogs:** Add `DialogDescription` or `aria-describedby` to all Dialog/Modal components to improve accessibility and clear logs.
- **Clean Props:** Ensure boolean props like `fill` or `priority` are passed correctly to DOM elements (use strings if passing to non-React elements).

---

## üéØ ACTION PLAN

**Immediate Priorities:**

1.  **Security Mitigation:**
    - Investigation into `quickbooks-sdk` relies on `axios` <=0.29.0.
    - Check if `zendesk-client` has a newer version.
2.  **Linting Repair:**
    - Fix all `react/no-unescaped-entities` in `app/(marketing)/warranty/page.tsx` and others.
3.  **Warning Cleanup:**
    - Add `DialogDescription` to modals.

**Report Generated By:** Antigravity Agent
