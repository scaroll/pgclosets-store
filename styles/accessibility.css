/* =============================================================================
   ACCESSIBILITY.CSS - WCAG AA COMPLIANT STYLES
   ============================================================================= */

/* =============================================================================
   FOCUS MANAGEMENT & INDICATORS
   ============================================================================= */

/* Enhanced focus indicators for all interactive elements */
:focus {
  outline: 3px solid #2563eb; /* High contrast blue */
  outline-offset: 2px;
  transition: outline 0.2s ease-in-out;
}

/* Specific focus styles for different element types */
button:focus,
[role="button"]:focus {
  outline: 3px solid #2563eb;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px #ffffff, 0 0 0 5px #2563eb;
}

a:focus {
  outline: 3px solid #1d4ed8;
  outline-offset: 2px;
  background-color: rgba(29, 78, 216, 0.1);
  border-radius: 2px;
}

input:focus,
textarea:focus,
select:focus {
  outline: 3px solid #2563eb;
  outline-offset: 1px;
  border-color: #2563eb;
  box-shadow: 0 0 0 1px #2563eb;
}

/* Focus-visible support for keyboard users only */
:focus-visible {
  outline: 3px solid #2563eb;
  outline-offset: 2px;
}

:focus:not(:focus-visible) {
  outline: none;
}

/* Enhanced focus for form elements */
.form-control:focus {
  border-color: #2563eb;
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
  outline: 2px solid #2563eb;
  outline-offset: 1px;
}

/* =============================================================================
   KEYBOARD NAVIGATION STYLES
   ============================================================================= */

/* Skip to content link */
.skip-to-content {
  position: fixed;
  top: -100px;
  left: 16px;
  z-index: 9999;
  background: #2563eb;
  color: white;
  padding: 12px 24px;
  text-decoration: none;
  border-radius: 4px;
  font-weight: 600;
  transition: top 0.3s ease;
}

.skip-to-content:focus {
  top: 16px;
  outline: 3px solid #fbbf24;
  outline-offset: 2px;
}

/* Keyboard navigation hints */
.keyboard-nav-hint {
  position: absolute;
  left: -10000px;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

.keyboard-nav-hint:focus {
  position: static;
  left: auto;
  width: auto;
  height: auto;
  overflow: visible;
  background: #1f2937;
  color: white;
  padding: 8px 12px;
  border-radius: 4px;
  font-size: 14px;
}

/* Focus trap for modals and dialogs */
.focus-trap-boundary {
  position: relative;
}

.focus-trap-start,
.focus-trap-end {
  position: absolute;
  left: -10000px;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

/* =============================================================================
   HIGH CONTRAST ENHANCEMENTS
   ============================================================================= */

/* Enhanced contrast for text */
.high-contrast {
  --text-primary: #000000;
  --text-secondary: #1f2937;
  --bg-primary: #ffffff;
  --bg-secondary: #f9fafb;
  --border-color: #374151;
  --accent-color: #1d4ed8;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  :root {
    --focus-color: #000000;
    --focus-bg: #ffff00;
  }

  *:focus {
    outline: 3px solid var(--focus-color);
    background-color: var(--focus-bg);
    color: var(--focus-color);
  }

  button,
  [role="button"] {
    border: 2px solid #000000;
  }

  a {
    text-decoration: underline;
    text-decoration-thickness: 2px;
  }
}

/* =============================================================================
   SCREEN READER UTILITIES
   ============================================================================= */

/* Screen reader only content */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.sr-only-focusable:focus {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* Announcements for screen readers */
.sr-announcement {
  position: absolute;
  left: -10000px;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

[aria-live] {
  speak: literal-punctuation;
}

/* =============================================================================
   LOADING AND STATE INDICATORS
   ============================================================================= */

/* Loading states with proper ARIA support */
.loading-spinner {
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 2px solid #e5e7eb;
  border-radius: 50%;
  border-top-color: #2563eb;
  animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.loading-text::after {
  content: "...";
  animation: dots 1.5s steps(4, end) infinite;
}

@keyframes dots {
  0%, 20% { content: ""; }
  40% { content: "."; }
  60% { content: ".."; }
  80%, 100% { content: "..."; }
}

/* Skeleton loading states */
.skeleton {
  background: linear-gradient(90deg, #e5e7eb 25%, #f3f4f6 50%, #e5e7eb 75%);
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s infinite;
}

@keyframes skeleton-loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* =============================================================================
   REDUCED MOTION SUPPORT
   ============================================================================= */

/* Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .skeleton {
    animation: none;
    background: #e5e7eb;
  }

  .loading-spinner {
    animation: none;
    border-top-color: #2563eb;
  }
}

/* =============================================================================
   ERROR AND VALIDATION STATES
   ============================================================================= */

/* Error states with high contrast */
.error,
[aria-invalid="true"] {
  border-color: #dc2626;
  outline-color: #dc2626;
}

.error:focus,
[aria-invalid="true"]:focus {
  outline: 3px solid #dc2626;
  outline-offset: 1px;
  box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.2);
}

.error-message {
  color: #dc2626;
  font-weight: 600;
  margin-top: 4px;
}

/* Success states */
.success,
[aria-invalid="false"] {
  border-color: #16a34a;
}

.success:focus {
  outline: 3px solid #16a34a;
  outline-offset: 1px;
  box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.2);
}

/* =============================================================================
   PRINT ACCESSIBILITY
   ============================================================================= */

@media print {
  .sr-only {
    position: static;
    width: auto;
    height: auto;
    padding: 0;
    margin: 0;
    overflow: visible;
    clip: auto;
    white-space: normal;
    border: 0;
  }

  /* Ensure links are visible in print */
  a[href]:after {
    content: " (" attr(href) ")";
    font-size: smaller;
  }

  /* Hide decorative elements in print */
  .no-print {
    display: none !important;
  }
}

/* =============================================================================
   RESPONSIVE ACCESSIBILITY
   ============================================================================= */

/* Mobile-first accessibility enhancements */
@media (max-width: 768px) {
  /* Larger touch targets on mobile */
  button,
  [role="button"],
  a,
  input[type="submit"],
  input[type="button"] {
    min-height: 44px;
    min-width: 44px;
    padding: 12px 16px;
  }

  /* Improved spacing for mobile users */
  .focusable-element + .focusable-element {
    margin-top: 8px;
  }
}

/* Tablet adjustments */
@media (min-width: 769px) and (max-width: 1024px) {
  /* Maintain good touch targets on tablets */
  button,
  [role="button"],
  a {
    min-height: 44px;
    padding: 10px 16px;
  }
}

/* =============================================================================
   UTILITY CLASSES
   ============================================================================= */

/* Hide elements visually but keep them accessible to screen readers */
.visually-hidden {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/* Show visually hidden elements on focus */
.visually-hidden-focusable:focus {
  position: static !important;
  width: auto !important;
  height: auto !important;
  padding: inherit !important;
  margin: inherit !important;
  overflow: visible !important;
  clip: auto !important;
  white-space: normal !important;
}

/* Accessible color combinations */
.color-contrast-aa {
  /* Ensures 4.5:1 contrast ratio minimum */
  background-color: #ffffff;
  color: #1f2937;
}

.color-contrast-aaa {
  /* Ensures 7:1 contrast ratio for AAA compliance */
  background-color: #ffffff;
  color: #000000;
}

/* Focus management utilities */
.focus-within-highlight:focus-within {
  outline: 2px solid #2563eb;
  outline-offset: 2px;
}

/* Accessible button reset */
.btn-reset {
  background: none;
  border: none;
  padding: 0;
  font: inherit;
  cursor: pointer;
  outline: inherit;
  color: inherit;
}

.btn-reset:focus {
  outline: 3px solid #2563eb;
  outline-offset: 2px;
}